---
tag: svn	
categories: svn
title: 腾讯云svn搭建
---

# 腾讯云svn搭建
cent6.8

## 1.安装svn

`yum install subversion`

安装完成可以输入

`svnserve --version`

查看svn版本,查询到就表示成功

## 2.创建svn版本库目录

比如我是创建在/var/svn下

`mkdir /var/svn`

(当然你也可以创建在其他地方)

## 3.创建版本库

我的目录名是svnRepos

`svnadmin create /var/svn/svnRepos`

然后进入到创建的目录中

`cd /var/svn/svnRepos`

svnRepos这里面会有几个目录,其中的conf文件夹有几个重要的文件夹:
* svnserve.cont  //各种配置的文件
* authz  		//权限管理配置的文件
* passwd			//用户名密码的文件

## 4.配置svnserve.conf文件

进入到conf文件夹

`cd conf`

然后配置svnserve.conf

`vi svnserve.conf`

修改如下,把这几行前的`# `去掉(注意:空格也要去掉)

(vim的使用具体自己查询,这里不做描述)




```
//匿名访问的权限，可以是read、write、none，默认为read，在此因为我要建立我团队的私人版本库，故我设置为none
anon-access=none

//使授权用户有写权限，参数也是如上3个
auth-access=write

//使用哪个文件作为账号文件，在此指定在conf文件里面的另外一个文件passwd
password-db=passwd

//使用哪个文件作为权限文件，在此指定在conf文件里面的另外一个文件authz
authz-db=authz

//认证命名空间，说白了就是版本库的所在目录
realm=/var/svn
```

## 5.配置antuz文件

老样子用vim打开authz文件

`vi authz`

group可以把passwd里创建的用户进行分组,当然你也可以不设置,这里根据你的需求具体修改


```
[groups]            
//因为只有一个版本库，故使用[/]
[/]                 //库目录权限
admin = rw           //用户admin的权限是rw(read write)
* =				//剩余用户没有权限
```

## 6.配置passwd文件

`vi passwd`



左边用户名,右边密码

## 7.启动svn

`svnserve -d -r /var/svn`

使用`ps aux | grep svn`查看是否已经启动了svn



## 8.停止svn

`kiallall svnserve`

在修改配置后要重启才生效,所以修改后,先停止,再启动.

## 9.设置开机自启

我放在root目录下

`vi /root/svn_startup.sh`

用vim输入以下内容


```
#!/bin/bash 
/usr/bin/svnserve -d -r /var/svn/
```

/usr/bin/svnserve 是svnserve的路径,最好写绝对路径，因为启动的时候，环境变量也许没加载。 

`which svnserve //绝对路径`

然后修改该脚本的执行权限


```
chmod 777 svn_startup.sh
```

最后,加入到开机自动运行 

`vi /etc/rc.d/rc.local `

在末尾添加脚本的路径`/root/svn_startup.sh`

这样重启就可以自动运行了

